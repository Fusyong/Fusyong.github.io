<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>嬉戏实验室</title>
    <meta name="description" content="">
    <meta name="author" content="黄复雄">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="/theme/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/theme/bootstrap.min.css" rel="stylesheet">
    <link href="/theme/bootstrap.min.responsive.css" rel="stylesheet">
    <link href="/theme/local.css" rel="stylesheet">
    <link href="/theme/pygments.css" rel="stylesheet">

    <!-- So Firefox can bookmark->"abo this site" -->

</head>

<body>

<div class="navbar">
    <div class="navbar-inner">
    <div class="container">

         <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
             <span class="icon-bar"></span>
             <span class="icon-bar"></span>
             <span class="icon-bar"></span>
         </a>

        <a class="brand" href="/">嬉戏实验室</a>
        <div class="nav-collapse">
        <ul class="nav">

            <li><a href="http://www.xiiigame.com">XiiiGame</a></li>
           
            <li><a href="/pages/about.html">About</a></li>
        </ul>
        </div>
        
    </div>
    </div>
</div>

<div class="container">
    <div class="content">
    <div class="row">

        <div class="span9">
        

        


    <div class='article'>
        <div class="content-title">
            <a href="/ying-pan-sun-pi-qiang-jiu-shu-ju.html"><h1>硬盘损坏，抢救数据</h1></a>
2020-09-26 周六

	by 		<a class="url fn" href="/author/huang-fu-xiong.html">黄复雄.</a>
 


 
        </div>
        
        <div><p>上两周坏了一个硬盘。——这还是第一次把硬盘用坏。虽然此前20天备份过一次，可想到要重做这二十天的工，很是沮丧。好在经过两三天的尝试，全部恢复了。现记录如下。</p>
<h2 id="_1">前兆</h2>
<p>大概两三个月前，有天晚上关机着急，没等主机关闭就关了点。结果导致固态C盘损坏。换盘，重装了系统。这跟今次硬盘损坏大概没有关系，存疑。</p>
<p>这次D盘损坏前大概两三周，<strong>一个正在操作的问题突然报出无法找到。到所在位置去看，文件夹打不开了。用win10自带的磁盘“差错”工具处理后，在根目录隐藏文件夹<code>found.000</code>中找到了恢复的文件夹和文件。</strong></p>
<p>这大概就是一个前兆，但当时没太在意，没有备份文件。</p>
<h2 id="_2">磁盘崩溃过程</h2>
<p>当天写笔记，编译为html时突然报刚才写的文件找不到，紧接着<strong>很多文件都无法找到。然后win10系统卡死，无法正常关机。</strong></p>
<p>关电重启后报系统检查错误（具体记不清了），很久无进展。</p>
<p>再关电重启，停留在主板logo页面，下面的圈长久不停。</p>
<p>以上两种状态常交替出现。</p>
<h2 id="_3">拆下硬盘能正常启动</h2>
<p><strong>拆下D盘后能正常启动。</strong></p>
<p>买了一个硬盘底座，连接后，用各种磁盘工具、数据恢复工具都无法处理，多半卡死。</p>
<p>硬盘底座有个硬盘对拷的功能，不知道工作原理，尝试了一下，很久没看到进展，就没敢再用。</p>
<h2 id="uubuntu">用U盘Ubuntu制作启动盘</h2>
<p>根据<a href="https://www.cgsecurity.org/wiki/Damaged_Hard_Disk">这个网页</a>的提示，制作了一个U盘的Ubuntu系统。——这个网页推荐Knoppix LiveCD系统，但我不熟悉。</p>
<p>具体制作方法可以看<a href="https://ubuntu.com/tutorials/create-a-usb-stick-on-windows#10-installation-complete">这个简单教程</a>。主要包括两步：</p>
<ol>
<li>安装Rufus；</li>
<li>用一个U盘制作Ubuntu系统，也就是直接用U盘启动、运行，不需要安装的系统。Rufus很容易用，只看这里的设置就可以：</li>
</ol>
<p><img alt="refus" src="https://ubuntucommunity.s3.dualstack.us-east-2.amazonaws.com/original/2X/d/df720a52ca05eb8348856590a6ffc1c1ab27e8ac.png"></p>
<h2 id="ubuntu">启动Ubuntu，安装软件</h2>
<p>做好后插在电脑上，准备启动。<strong>最好只留下问题盘和一张容量等于或大于问题盘的空磁盘（用于存储恢复的数据），sata连接，其余的全部拆除，以免误操作。</strong></p>
<p>把启动时更改biso的引导顺序，通过刚才的U盘引导。<strong>启动后不要操作问题盘和存储数据用的盘，不要装载！以免出问题。</strong></p>
<p>进入Ubuntu系统后先添加国内的程序源，以便安装程序。也就是在源文件<code>/etc/apt/sources.list</code>后添加源列表。比如阿里源：</p>
<div class="highlight"><pre><span></span><code>deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse
</code></pre></div>


<p>然后更新系统：</p>
<div class="highlight"><pre><span></span><code>sudo apt-get update
sudo apt-get upgrade
</code></pre></div>


<p><strong>安装<code>gddrescue</code>。注意软件包名字前有个g，但是命令没有g，只是<code>ddrescue</code>。</strong></p>
<div class="highlight"><pre><span></span><code>sudo apt-get install gddrescue
</code></pre></div>


<p>还可以安装通过图形查看进度的工具<code>ddrescueview</code>：</p>
<div class="highlight"><pre><span></span><code>sudo apt-get install ddrescueview
</code></pre></div>


<h2 id="ddrescue">使用<code>ddrescue</code>复制、抢救数据</h2>
<p>先查看磁盘列表：</p>
<div class="highlight"><pre><span></span><code>lshw -C disk
</code></pre></div>


<p>或者：</p>
<div class="highlight"><pre><span></span><code>fdisk -l
</code></pre></div>


<p><img alt="磁盘信息.jpg" src="/images/硬盘损坏，抢救数据/磁盘信息.jpg"></p>
<p>磁盘通常显示为<code>/dev/sda</code>, <code>/dev/sdb</code>这样的格式。其下后还可能显示分卷，如<code>/dev/sda1</code>，<code>/dev/sda1</code>。<strong>下面处理时，应该操作整盘，而不是分卷。</strong></p>
<p><a href="https://www.gnu.org/software/ddrescue/manual/ddrescue_manual.html">这里是ddrecue的手册</a>，详细解释了算法和处理过程，有助于你在漫长的等待过程中免于焦虑。</p>
<p>ddrescue有很多选项，但我们通常只需要两个步骤。</p>
<p><strong>第一步，</strong>快速抓取大部分无错区域：</p>
<div class="highlight"><pre><span></span><code>sudo ddrescue -n -f /dev/问题盘 /dev/存储盘 rescued.log
</code></pre></div>


<p><strong>注意，选项<code>-f</code>意味着存储盘上的内容会被覆盖。</strong></p>
<p><code>rescued.log</code>是记录进度的文件。如果临时停止，<strong>重新开始后，ddrescue可以根据这个文件接着做。U盘系统重启后会丢失用户文件，所以这个文件应该通过在线邮箱等方式妥善保存。</strong></p>
<p>可以使用ddrescueview查看进度（可以用<code>-r 30s</code>这样的选项来设置刷新间隔）：</p>
<div class="highlight"><pre><span></span><code>sudo ddrescueview rescued.log
</code></pre></div>


<p>效果如下：</p>
<p><img alt="图形信息.jpg" src="/images/硬盘损坏，抢救数据/图形信息.jpg"></p>
<p><strong>我的问题盘是1T容量，数据大概900G，完成第一步耗时近6小时。</strong></p>
<p><img alt="结果信息.jpg" src="/images/硬盘损坏，抢救数据/结果信息.jpg"></p>
<p><strong>第二步，</strong>尝试从有错区域中“刮取”，也就是最大限度地恢复数据：</p>
<div class="highlight"><pre><span></span><code>sudo ddrescue -r <span class="m">1</span> /dev/old_disk /dev/new_disk rescued.log
</code></pre></div>


<p>选项<code>-r 1</code>表示重复次数。这个步骤很耗时，如果时间允许重复两三次也是可以的。这一步我只做了一小会儿。拆下来发现绝大多数已经恢复，就不再做了。</p>
<h2 id="win10">使用win10磁盘工具查错</h2>
<p>复制得到的磁盘是有错误的，我使用win10磁盘工具查错后，在根目录的隐藏文件夹<code>found.000</code>中找到了很多恢复的文件、文件夹。再通过TC，过滤时间后，得到未备份的内容，加到备份中。
（可能ddrescueview有相应的除错工具，我没有注意到。）</p>
<p><strong>后来使用文件时，发现个别文件看起来正常，但无法打开。所以，重要文件最好逐一打开看看。</strong></p>
<p>赶紧买了个4T的硬盘，所有文件都备份在这里。还重新打开谷歌硬盘，<strong>把重要文件和最近正处理的文件备份到网上。</strong>问题盘暂时还留着，后面如果再发现问题，还可以更精细地处理。</p></div>
        <hr />
    </div>


 
        

 

    <div class='article'>
        <a href="/yi-yu-pin-yin-yun-mu-ode-du-fa.html"><h2>汉语拼音韵母o的读法</h2></a>
        <div class= "well small"> 2020-09-23 周三

	by 		<a class="url fn" href="/author/huang-fu-xiong.html">黄复雄.</a>
 


 </div>
        <div class="summary"><p>一直以来有很多家长和老师在知乎上问汉语拼音o的读法。一年级新生最近开始学拼音，这个问题又热了起来。以下是我早前对知乎问题<a href="https://www.zhihu.com/question/406366052/answer/1333740731">汉语拼音里面“o”读“o”还是“喔”？我真的糊涂了！</a>回答。现稍加改动，发于此。</p> <a href="/yi-yu-pin-yin-yun-mu-ode-du-fa.html">read...</a></div>
    </div>	
				

 
        

 

    <div class='article'>
        <a href="/zen-yao-jiao-hai-zi-shi-zi.html"><h2>怎么教孩子识字</h2></a>
        <div class= "well small"> 2020-09-15 周二

	by 		<a class="url fn" href="/author/huang-fu-xiong.html">黄复雄.</a>
 


 </div>
        <div class="summary"><p>这是对知乎问题<a href="https://www.zhihu.com/question/419919999/answer/1474585214">孩子即将上小学，识字很慢。有什么识字的好办法吗？</a>的回答。</p> <a href="/zen-yao-jiao-hai-zi-shi-zi.html">read...</a></div>
    </div>	
				

 
        

 

    <div class='article'>
        <a href="/xiao-xue-yu-wen-shi-zi-qia-pian-2020nian-qiu-ji.html"><h2>小学语文识字卡片（2020年秋季）</h2></a>
        <div class= "well small"> 2020-08-24 周一

	by 		<a class="url fn" href="/author/huang-fu-xiong.html">黄复雄.</a>
 


 </div>
        <div class="summary"><p>配套部编版小学语文教材的生字卡片，2020年秋季适用。随时可能更新，请关注本文在<a href="https://blog.xiiigame.com/archives.html">blog.xiiiGame.com</a>上的版本。</p> <a href="/xiao-xue-yu-wen-shi-zi-qia-pian-2020nian-qiu-ji.html">read...</a></div>
    </div>	
				

 
        

 

    <div class='article'>
        <a href="/shu-lun-zheng-li-ming-feng-fang-tong-xue-shu-cheng.html"><h2>[书论整理]明·丰坊《童学书程》</h2></a>
        <div class= "well small"> 2020-07-17 周五

	by 		<a class="url fn" href="/author/huang-fu-xiong.html">黄复雄.</a>
 


 </div>
        <div class="summary"><p>这是几年前整理的十篇书论。版本来源比较杂，谨供一般性阅读。明·丰坊《童学书程》</p> <a href="/shu-lun-zheng-li-ming-feng-fang-tong-xue-shu-cheng.html">read...</a></div>
    </div>	
				

 
        

 

    <div class='article'>
        <a href="/shu-lun-zheng-li-ming-li-chun-da-zi-jie-gou-ba-shi-si-fa.html"><h2>[书论整理]明·李淳《大字结构八十四法》</h2></a>
        <div class= "well small"> 2020-07-17 周五

	by 		<a class="url fn" href="/author/huang-fu-xiong.html">黄复雄.</a>
 


 </div>
        <div class="summary"><p>这是几年前整理的十篇书论。版本来源比较杂，谨供一般性阅读。明·李淳《大字结构八十四法》</p> <a href="/shu-lun-zheng-li-ming-li-chun-da-zi-jie-gou-ba-shi-si-fa.html">read...</a></div>
    </div>	
				

 
        

 

    <div class='article'>
        <a href="/shu-lun-zheng-li-ming-mo-qing-chu-song-cao-shu-fa-yue-yan.html"><h2>[书论整理]明末清初·宋曹《书法约言》</h2></a>
        <div class= "well small"> 2020-07-17 周五

	by 		<a class="url fn" href="/author/huang-fu-xiong.html">黄复雄.</a>
 


 </div>
        <div class="summary"><p>这是几年前整理的十篇书论。版本来源比较杂，谨供一般性阅读。明末清初·宋曹《书法约言》</p> <a href="/shu-lun-zheng-li-ming-mo-qing-chu-song-cao-shu-fa-yue-yan.html">read...</a></div>
    </div>	
				

 
        

 

    <div class='article'>
        <a href="/shu-lun-zheng-li-ming-song-se-shu-fa-lun-guan.html"><h2>[书论整理]明·宋啬《书法纶贯》</h2></a>
        <div class= "well small"> 2020-07-17 周五

	by 		<a class="url fn" href="/author/huang-fu-xiong.html">黄复雄.</a>
 


 </div>
        <div class="summary"><p>这是几年前整理的十篇书论。版本来源比较杂，谨供一般性阅读。明·宋啬《书法纶贯》</p> <a href="/shu-lun-zheng-li-ming-song-se-shu-fa-lun-guan.html">read...</a></div>
    </div>	
				

 
        

 

    <div class='article'>
        <a href="/shu-lun-zheng-li-ming-yang-shen-mo-chi-suo-lu.html"><h2>[书论整理]明·杨慎《墨池琐录》</h2></a>
        <div class= "well small"> 2020-07-17 周五

	by 		<a class="url fn" href="/author/huang-fu-xiong.html">黄复雄.</a>
 


 </div>
        <div class="summary"><p>这是几年前整理的十篇书论。版本来源比较杂，谨供一般性阅读。明·杨慎《墨池琐录》</p> <a href="/shu-lun-zheng-li-ming-yang-shen-mo-chi-suo-lu.html">read...</a></div>
    </div>	
				

 
        

 

    <div class='article'>
        <a href="/shu-lun-zheng-li-song-gao-zong-zhao-gou-han-mo-zhi.html"><h2>[书论整理]宋高宗赵构《翰墨志》</h2></a>
        <div class= "well small"> 2020-07-17 周五

	by 		<a class="url fn" href="/author/huang-fu-xiong.html">黄复雄.</a>
 


 </div>
        <div class="summary"><p>这是几年前整理的十篇书论。版本来源比较杂，谨供一般性阅读。宋高宗赵构《翰墨志》</p> <a href="/shu-lun-zheng-li-song-gao-zong-zhao-gou-han-mo-zhi.html">read...</a></div>
    </div>	
				
<div class="pagination">
<ul>
    <li class="prev disabled"><a href="#">&larr;</a></li>

    <li class="active"><a href="/index.html">1</a></li>
    <li class=""><a href="/index2.html">2</a></li>
    <li class=""><a href="/index3.html">3</a></li>
    <li class=""><a href="/index4.html">4</a></li>
    <li class=""><a href="/index5.html">5</a></li>
    <li class=""><a href="/index6.html">6</a></li>
    <li class=""><a href="/index7.html">7</a></li>

    <li class="next"><a href="/index2.html">&rarr;</a></li>

</ul>
</div>
 
  
        </div>
        
        <div class="span3">

            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Site
                </li>
            
                <li><a href="/archives.html">所有文章</a>
                <li><a href="/tags.html">分组标签</a>




            </ul>
            </div>


            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Categories
                </li>
                
                <li><a href="/category/11-bu-kao-si-ji.html">11 布考斯基</a></li>
                <li><a href="/category/12-phaserxue-xi-zhong-xin-zu.html">12 Phaser学习中心组</a></li>
                <li><a href="/category/13-pyo.html">13 Pyo</a></li>
                <li><a href="/category/14-xiao-lu-gong-ju-bian-cheng-za-xiang.html">14 效率工具+编程杂项</a></li>
                <li><a href="/category/21-er-tong-shi-zi.html">21 儿童识字</a></li>
                <li><a href="/category/22-qin-zi-xie-zi.html">22 亲子写字</a></li>
                <li><a href="/category/23-qin-zi-ban-xue.html">23 亲子伴学</a></li>
                   
            </ul>
            </div>


            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Links
                </li>

                <li>微信公众号“黄复雄”(xiiiGame):</li>
                <div align="center"><img src="http://blog.xiiigame.com/images/about/qrCodeXiiigame.jpg" /></div> 

                <li>《拼字》微信小游戏:</li>
                <div align="center"><img src="http://blog.xiiigame.com/images/about/qrCode.jpg" /></div> 

                <li><a href="http://www.xiiigame.com/example">拼字游戏(网页版)</a></li>
            </ul>
            </div>


            <div class="social">
            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Social
                </li>
           
                <li><a href="https://github.com/Fusyong">GitHub</a></li>
                <li><a href="https://www.phaser-china.com/">Phaser小站</a></li>
            </ul>
            </div>
            </div>

        </div>  
    </div>     </div> 
<footer>
<br />
<p><a href="">嬉戏实验室</a> &copy; 黄复雄 2020, Powered by <a href="http://getpelican.com/">Pelican</a></p>
</footer>

</div> <!-- /container -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="/theme/bootstrap-collapse.js"></script>
<script>var _gaq=[['_setAccount','UA-105243279-1'],['_trackPageview']];(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.src='//www.google-analytics.com/ga.js';s.parentNode.insertBefore(g,s)}(document,'script'))</script>
<a href="https://github.com/Fusyong"><img style="position: absolute; top: 40px; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png" alt="Fork me on GitHub" /></a>
 
</body>
</html>