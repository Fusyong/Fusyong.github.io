<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>嬉戏实验室 - Phaser3学习笔记</title>
    <meta name="description" content="">
    <meta name="author" content="黄复雄">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="/theme/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/theme/bootstrap.min.css" rel="stylesheet">
    <link href="/theme/bootstrap.min.responsive.css" rel="stylesheet">
    <link href="/theme/local.css" rel="stylesheet">
    <link href="/theme/pygments.css" rel="stylesheet">

    <!-- So Firefox can bookmark->"abo this site" -->

</head>

<body>

<div class="navbar">
    <div class="navbar-inner">
    <div class="container">

         <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
             <span class="icon-bar"></span>
             <span class="icon-bar"></span>
             <span class="icon-bar"></span>
         </a>

        <a class="brand" href="/">嬉戏实验室</a>
        <div class="nav-collapse">
        <ul class="nav">

            <li><a href="http://www.xiiigame.com">XiiiGame</a></li>
           
            <li><a href="/pages/about.html">About</a></li>
        </ul>
        </div>
        
    </div>
    </div>
</div>

<div class="container">
    <div class="content">
    <div class="row">

        <div class="span9">
    <div class='article'>
        <div class="content-title">
            <h1>Phaser3学习笔记</h1>
2018-11-12 周一

	by 		<a class="url fn" href="/author/huang-fu-xiong.html">黄复雄.</a>
 


        </div>
	
        <div>
<h2 id="_1">说明</h2>
<p><strong>【本文正在清理，把实例相关的内容分离到<a href="/phaser3guan-wang-shi-li-xue-xi-bi-ji.html">Phaser3官网实例学习笔记</a>】</strong></p>
<p>最近Phaser的中文社区突然活跃起来。（也可能是我最近关注多一点造成的错觉。）很多初学者问一些过于基础的问题，比如怎么旋转一个精灵，有时引起社区成员的反感甚至奚落；这些问题本应该在自学入门中了解。我把自己自学Phaser的一些经验、资料累积在这里，对初学者可能有用。</p>
<ul>
<li>文中材料主要是针对Phaser3的。Phaser3变化很大，与Phaser2不同的地方做了重点标记。<a href="/phaser3guan-wang-shi-li-xue-xi-bi-ji.html">Phaser3官网实例学习笔记</a>已经单列一文。</li>
<li>摘录的代码都是片段。我用的是TypeScript语言，但摘录的代码可能是JavaScript，或在此基础上添加了TypeScript类型标记。JavaScript代码在TypeScript中是有效的，但可能使编辑器、编译工具等报错——这跟设置有关。</li>
<li><strong>本文是随时更新的，</strong>最终会累积成一个便览手册；可通过搜索或底端的目录快速查找。</li>
</ul>
<h2 id="_2">入门三部曲</h2>
<p>对于初学者来说，合适的入门程序可以大大地提高成效。我的经验是：</p>
<ol>
<li>学习官网入门教程，知道做出Phaser游戏的最必要的技术，了解一个Phaser游戏的概观；</li>
<li>浏览官网实例，了解Phaser能做什么，大体是怎么做的；做好注记，以便日后快速查询；</li>
<li>从零开始做一个Phaser游戏，遇到问题随时搜索官网实例、API文档、开发日志等；</li>
</ol>
<h2 id="_3">学习资源</h2>
<ul>
<li><a href="https://phaser.io/tutorials/making-your-first-phaser-3-game/index">官网入门教程</a>。一个简明、完整的权威教程。</li>
<li><a href="https://github.com/photonstorm/phaser3-examples">Phaser3实例库</a>。可以在<a href="http://labs.phaser.io">labs.phaser.io</a>连线使用。英文不大好的可以看我做的学习笔记：<a href="/phaser3guan-wang-shi-li-xue-xi-bi-ji.html">Phaser3官网实例学习笔记</a>，<a href="/phaser2guan-wang-shi-li-xue-xi-bi-ji.html">《Phaser2官网实例学习笔记》</a>。</li>
<li><a href="https://photonstorm.github.io/phaser3-docs/index.html">Phaser3在线文档</a>。可参考<a href="https://github.com/photonstorm/phaser3-docs">完整的文档库</a>。</li>
<li><a href="https://phaser.io/community/newsletter">官方电邮通讯/电子期刊<em>Phaser World</em></a>。其中的开发日志记录了Phaser3某些重要部分的的技术思路、使用方法，适于深度的专题学习。也包含很多官方推荐的他方教程，因无系统，精粗杂陈，不便使用。</li>
<li><a href="https://github.com/digitsensitive/phaser3-typescript">Phaser3-TypeScript项目模板和实例库</a>。包含项目开发工具和7个比较完整的游戏实例。GitHub上也有使用JavaScript的Phaser3项目模板，因本人没有用过，不便推荐。</li>
<li><a href="https://github.com/littlee/wechat-small-game-phaser">wechat-small-game-phaser库</a>，这是一个使PhaserCE适配微信小游戏的库，思路清晰。经实测，基本架构同样适用于Phaser3。</li>
<li><a href="https://www.cnblogs.com/honghong87/p/9592680.html">《phaser3 微信小游戏若干问题》</a>，解决Phaser3在微信中载入资源时不支持BLOB的问题（文章只解决了图片载入问题，其他资源载入问题需要照例自行修改Phaser3源码）。</li>
<li><a href="https://phaser.discourse.group/">Phaser官方新建的独立讨论组</a>。<a href="http://www.html5gamedevs.com/forum/14-phaser-2/">Phaser2论坛</a>。<a href="http://www.html5gamedevs.com/forum/33-phaser-3/">Phaser3旧论坛</a>。</li>
<li>我建的一个QQ群交流“Phaser3学习中心组”(938890881)。人气比较高的QQ群有“Phaser小站”(519413640，<a href="https://www.phaser-china.com/">兼有同名网站</a>)，“Pixi.js&amp;Phaser交流群”(384427721)</li>
</ul>
<h2 id="_4">资源检索</h2>
<p>搜索引擎自然不用说了。</p>
<p>一些大规模的资源，比如实例库、文档、官方电子期刊等，可以先下载到本地。再用PowerGrep、FileLocator、PDF-XChange之类的全文检索工具检索。<strong>当然，你要比较熟悉Phaser的术语习惯，才能有效地检索。</strong></p>
<p>有一个我经常用的<a href="http://phaserchains.boniatillo.com/">Phaser Chains项目</a>，可惜目前仅基于Phaser2.4.7。期待早日支持Phaser3。它可以对API文档和官网实例进行联合检索，支持通配符，<strong>支持对象属性的关系链条，</strong>所以要比翻看文档方便、直观得多。比如搜"state.*sprite"，就能查到很多相关条目（条目又关联着文档和官网实例）：</p>
<div class="highlight"><pre><span></span><span class="nx">Phaser</span><span class="p">.</span><span class="nx">State</span><span class="p">.</span><span class="nx">make</span><span class="p">.</span><span class="nx">sprite</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">frame</span><span class="p">)</span> <span class="o">:</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">Sprite</span><span class="p">;</span>
<span class="nx">Phaser</span><span class="p">.</span><span class="nx">State</span><span class="p">.</span><span class="nx">make</span><span class="p">.</span><span class="nx">audioSprite</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="o">:</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">AudioSprite</span><span class="p">;</span>
<span class="nx">Phaser</span><span class="p">.</span><span class="nx">State</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">sprite</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">frame</span><span class="p">,</span> <span class="nx">group</span><span class="p">)</span> <span class="o">:</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">Sprite</span><span class="p">;</span>
<span class="nx">Phaser</span><span class="p">.</span><span class="nx">State</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">audioSprite</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="o">:</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">AudioSprite</span><span class="p">;</span>
<span class="c1">//等等...</span>
</pre></div>
<h2 id="gamegameconfig">Game配置对象GameConfig</h2>
<p>Phaser3的配置对象包含很多项目，详见<a href="https://photonstorm.github.io/phaser3-docs/global.html#GameConfig">配置对象GameConfig文档</a>，也可参考<a href="https://github.com/digitsensitive/phaser3-typescript/blob/master/cheatsheets/game-config.md">小抄</a>。</p>
<p><strong>Phaser3广泛使用配置对象，又比如在生成Sprites、Tweens实例时。</strong></p>
<div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">type</span><span class="o">:</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">AUTO</span><span class="p">,</span>
    <span class="nx">width</span><span class="o">:</span> <span class="mi">800</span><span class="p">,</span>
    <span class="nx">height</span><span class="o">:</span> <span class="mi">600</span><span class="p">,</span>
    <span class="nx">physics</span><span class="o">:</span> <span class="p">{</span>
        <span class="k">default</span><span class="o">:</span> <span class="s1">'arcade'</span><span class="p">,</span>
        <span class="nx">arcade</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">gravity</span><span class="o">:</span> <span class="p">{</span> <span class="nx">y</span><span class="o">:</span> <span class="mi">300</span> <span class="p">},</span>
            <span class="nx">debug</span><span class="o">:</span> <span class="kc">false</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">scene</span><span class="o">:</span> <span class="p">{</span> <span class="c1">// 第一个场景自动运行，其余场景除非标有{ active: true }，否则不会自动运行</span>
        <span class="nx">preload</span><span class="o">:</span> <span class="nx">preload</span><span class="p">,</span> <span class="c1">// 资源加载场景</span>
        <span class="nx">create</span><span class="o">:</span> <span class="nx">create</span><span class="p">,</span>  <span class="c1">// 内容生成场景</span>
        <span class="nx">update</span><span class="o">:</span> <span class="nx">update</span>  <span class="c1">// 逐帧更新/循环处理的内容，如键盘、鼠标监控</span>
    <span class="p">}</span>
<span class="p">};</span>
<span class="c1">// **Phaser2的Game实例是通往内部系统的入口，Phaser3不再是这样，因此保存在全局变量中保存实例没有实际意义。**</span>
<span class="kd">var</span> <span class="nx">game</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">Game</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kd">function</span> <span class="nx">preload</span> <span class="p">(){}</span>
<span class="kd">function</span> <span class="nx">create</span> <span class="p">(){}</span>
<span class="kd">function</span> <span class="nx">update</span> <span class="p">(){}</span>
</pre></div>
<h2 id="gameobjects">GameObjects游戏对象</h2>
<ul>
<li>
<p>Phaser3游戏对象的一个重要变化，是把Phaser2中Sprite、Text、Group等游戏对象的容器功能分离出来，归到Container中。这样一来，Sprite、Text等不能添加子项；Group有子项，但实际是逻辑分组，非独占，通常也不能整体地控制显示状态（可以通过Actions批处理）。Phaser2的渲染核心是PIXI，虽然PIXI有Container，但在Phaser2中一般不直接使用。</p>
</li>
<li>
<p>Phaser3游戏对象的原点（origin，对应于Phaser2的锚点/anchor属性）默认为中心点，而不是左上角。原点通过属性<code>originX</code>, <code>originY</code>获取，通过方法<code>setOrigin(x, y)</code>设置。</p>
</li>
<li>
<p>Phaser.GameObjects.GameObjectFactory/游戏对象工厂类。实际上通过Scene.add属性引用，比如<code>this.add.sprite(config)</code>。</p>
</li>
<li>Phaser.GameObjects.GameObjectCreator/游戏对象生成器。实际上通过Scene.make属性引用，比如<code>this.make.sprite(config)</code>。与工厂类不同，生成器生成的游戏对象不会自动加载到场景上。</li>
</ul>
<h3 id="sprite">Sprite精灵</h3>
<p>精灵是Phaser游戏中最主要的游戏对象，在游戏对象中有代表性。要便览精灵的属性和方法，请参考<a href="/phaser3-apiwen-dang-da-gang-sprite.html">《Phaser3 API文档大纲-Sprite》</a>。</p>
<div class="highlight"><pre><span></span><span class="n">let</span> <span class="n">newSprite</span> <span class="o">=</span> <span class="n">this</span><span class="p">.</span><span class="k">add</span><span class="p">.</span><span class="n">sprite</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="ss">"spriteTexture"</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</pre></div>
<p>参考小抄<a href="https://github.com/digitsensitive/phaser3-typescript/blob/master/cheatsheets/gameobjects/sprite.md">Phaser.GameObject.Sprite</a></p>
<h4>Size内部尺寸</h4>
<p>Size内部尺寸、原本（native）尺寸，包括：</p>
<ul>
<li>Sprite.width</li>
<li>Sprite.height</li>
</ul>
<p>改变内部尺寸，供帧或物理体生成之用，不会影响已经渲染的游戏对象的尺寸：</p>
<ul>
<li>Sprite.setSize(width, height)</li>
</ul>
<h4>DisplaySize显示尺寸</h4>
<ul>
<li>Sprite.displayWidth</li>
<li>Sprite.displayHeight</li>
</ul>
<p>有两个方法改变显示尺寸:</p>
<ul>
<li>Sprite.setScale(x [, y])</li>
<li>Sprite.setDisplaySize(width, height) </li>
</ul>
<h4>直接生成有物理属性的精灵</h4>
<div class="highlight"><pre><span></span><span class="nx">player</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">physics</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">sprite</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">450</span><span class="p">,</span> <span class="s1">'dude'</span><span class="p">);</span>
<span class="nx">player</span><span class="p">.</span><span class="nx">setBounce</span><span class="p">(</span><span class="mf">0.2</span><span class="p">);</span> <span class="c1">// 设置反弹</span>
<span class="nx">player</span><span class="p">.</span><span class="nx">setCollideWorldBounds</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>  <span class="c1">// 设置与世界边缘碰撞</span>
<span class="nx">player</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">setGravityY</span><span class="p">(</span><span class="mi">300</span><span class="p">)</span> <span class="c1">// 物理精灵的body包含了物理属性</span>
<span class="nx">player</span><span class="p">.</span><span class="nx">setTint</span><span class="p">(</span><span class="mh">0xff0000</span><span class="p">);</span> <span class="c1">// 着色</span>
</pre></div>
<h3 id="image">Image/图像</h3>
<p>图像与精灵的不同主要在于，Image没有动画（Animation）组件，消耗更小。
但图像也有输入事件、物理体，可以应用补间动画，可以滚动，所以只要你不使用动画，那么就应该用Image代替精灵。图像常用于显示静态图像，比如logo，背景，布景等没有动画（Animation）的元素。（在Phaser2中，Image的操控项更少，尤其是没有物理属性。）
注意：Tween（补间运动/补间动画）不同于动画（Animation）。</p>
<div class="highlight"><pre><span></span><span class="k">this</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">image</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="s1">'sky'</span><span class="p">);</span>  <span class="c1">// 指定原点/中心点位置位置</span>
<span class="k">this</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">image</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">sys</span><span class="p">.</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">sys</span><span class="p">.</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">"background"</span><span class="p">);</span> <span class="c1">// 居中放置</span>
<span class="k">this</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">image</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">'sky'</span><span class="p">).</span><span class="nx">setOrigin</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">// 设左上角为原点/锚点</span>
</pre></div>
<p>参考小抄<a href="https://github.com/digitsensitive/phaser3-typescript/blob/master/cheatsheets/gameobjects/image.md">Phaser.GameObject.Image</a></p>
<h3 id="shape">Shape/几何图形及其子类</h3>
<p>Shape是Phaser3新增的游戏对象。Shape本身不能加到场景上，而是用作下列几何图形游戏对象的基类：</p>
<ul>
<li>Arc弧形</li>
<li>Curve曲线形</li>
<li>Ellipse椭圆（包括正圆）</li>
<li>Grid栅格</li>
<li>IsoBox等距(isometric)方体</li>
<li>IsoTriangle等距三角体（四面体）</li>
<li>Line线条（包括三角形、梯形）</li>
<li>Polygon多边形</li>
<li>Rectangle方形</li>
<li>Start星形</li>
<li>Triangle三角形</li>
</ul>
<p>这些Shape子类，可以加入场景、组和容器中。你可以像处理其他常见游戏对象一样处理它们，比如应用补间动画、缩放、打开输入和物理属性。Shape通常支持填充色和笔触色。</p>
<p><strong>Shape拥有常规游戏对象的所有特性，不同之处在于它有高效的渲染方式。</strong>Shape不需要使用纹理，但又可以利用WebGL中的批处理的好处，所以能很方便地在游戏中快速渲染形状。它不仅没有Graphics的高消耗问题，甚至有些Shape子类比Sprite还要快。</p>
<h3 id="graphics">Graphics/几何图画</h3>
<p>Graphics主要用于绘制一些几何形状（比如方形、圆形、多边形、直线、弧线、曲线），最终构成一个几何图画。
Graphics初始的时候是空的，需要制定笔触色、填充色，然后用路径绘制，最后笔触着色、填充。有些常见形状，比如方形，可以方便地绘制。</p>
<p>在Canvas和WebGL两种模式中，Graphics的渲染是不同的。在Canvas下是绘制路径，在WebGL下是绘制多边形。这两种方式都很消耗资源，尤其是图画复杂的时候。所以，如果你的几何图画不会变化，或者变化少，你应该用Phaser.GameObjects.Graphics#generateTexture把几何图画“备份”成一个纹理，并把它返回用于生成精灵Sprite或者其他游戏对象。请注意你的几何图画的复杂程度和数量。</p>
<div class="highlight"><pre><span></span><span class="c1">// 绘制圆角方形</span>
<span class="kd">var</span> <span class="nx">graphics</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">graphics</span><span class="p">();</span>
<span class="nx">graphics</span><span class="p">.</span><span class="nx">fillStyle</span><span class="p">(</span><span class="mh">0xffff00</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="nx">graphics</span><span class="p">.</span><span class="nx">fillRoundedRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">32</span><span class="p">);</span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">graphics</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">make</span><span class="p">.</span><span class="nx">graphics</span><span class="p">().</span><span class="nx">fillStyle</span><span class="p">(</span><span class="mh">0x00ff00</span><span class="p">).</span><span class="nx">fillRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">800</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
<span class="c1">// 由几何图画生成纹理，由纹理生成Image，销毁几何图画</span>
<span class="nx">graphics</span><span class="p">.</span><span class="nx">generateTexture</span><span class="p">(</span><span class="s1">'hudbar'</span><span class="p">,</span> <span class="mi">800</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
<span class="nx">graphics</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>
<span class="k">this</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">image</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="s1">'hudbar'</span><span class="p">);</span>
</pre></div>
<h3 id="tilesprite">TileSprite瓦片精灵</h3>
<p>用小块Tile铺设背景。【有待补充】</p>
<h3 id="sprite3d3d">Sprite3D/3D精灵</h3>
<p>标准精灵的封装，可以被3D相机渲染，可以放在3D空间内。</p>
<h3 id="pathfollower">PathFollower/循路器</h3>
<p>PathFollower是一种特殊的Sprite，拥有精灵的所有属性，同时可以自动循着一条Path运动。</p>
<h3 id="blitter">Blitter/显存块移动单元/位块传送器</h3>
<p>Blitter是一种特殊容器，用于更新、管理Bob对象。Bob主要目标是快速渲染，而不是追求弹性；它包括一个纹理或者纹理中的帧、位置、透明度，还有翻转、是否可见的开关，但不能旋转、缩放；它们批量绘制方法以加速渲染。</p>
<p>一个Blitter绑定一个纹理。由这个Blitter生成的Bob可以使用这个纹理中的任何帧（可以动态改变），但不能使用别的纹理。就是因为绑定唯一的纹理，使得它们速度很快。</p>
<p>可以从游戏代码直接操控Bob对象，但Bob的生成和销毁需要通过父级Blitter来操作。</p>
<p>如果你需要在屏幕上渲染大量的帧，那么可以考虑Blitter；尤其是用作自己的特效系统的基础，它是特别有用的。</p>
<h3 id="bob">Bob/显存块移动对象/位块传送对象</h3>
<p>参见Blitter。</p>
<h3 id="text">Text文本</h3>
<p>Text对象使用标准的Canvas fillText API（效果比较多），在内部隐层画布上预先渲染，然后生成纹理，再渲染到游戏上。
文本所用字体必须是浏览器已经可以取用的，或通过第三方加载器预先已载入（Phaser没有字体加载功能），或已经嵌入CSS中。<strong>注意：如果字体名称中有空格或者数字，需要加上引号。</strong></p>
<p><strong>任何内容和格式变动都需要整体重制，因此很消耗算力。变动频繁，或者文本很多时，最好使用BitmapText。</strong></p>
<div class="highlight"><pre><span></span><span class="nt">var</span> <span class="nt">scoreText</span> <span class="o">=</span> <span class="nt">this</span><span class="p">.</span><span class="nc">add</span><span class="p">.</span><span class="nc">text</span><span class="o">(</span><span class="nt">16</span><span class="o">,</span> <span class="nt">16</span><span class="o">,</span> <span class="s1">'score: 0'</span><span class="o">,</span> <span class="p">{</span> <span class="n">fontSize</span><span class="p">:</span> <span class="s1">'32px'</span><span class="p">,</span> <span class="kc">fill</span><span class="o">:</span> <span class="s1">'#000'</span> <span class="p">}</span><span class="o">);</span>
<span class="nt">scoreText</span><span class="p">.</span><span class="nc">setText</span><span class="o">(</span><span class="s1">'Score: '</span> <span class="o">+</span> <span class="nt">10</span><span class="o">);</span>
</pre></div>
<h3 id="bitmaptext">BitmapText静态位图文本</h3>
<p>BitmapText的灵活性不如Text，比如不能使用阴影、填充、Web字体，但速度更快。
生成工具：</p>
<ul>
<li><a href="http://www.angelcode.com/products/bmfont/">BMFont (Windows, free)</a></li>
<li><a href="http://www.71squared.com/en/glyphdesigner">Glyph Designer (OS X, commercial)</a></li>
<li><a href="http://kvazars.com/littera/">Littera (Web-based, free)</a></li>
</ul>
<p>推荐使用XML格式，如果使用JSON格式，必须符合X2JS库的转换标准。<a href="http://codebeautify.org/xmltojson">这里有在线工具。</a></p>
<h3 id="dynamicbitmaptext">DynamicBitmapText动态位图文本</h3>
<p>与静态位图文本不同的是，动态位图文本每渲染一个字都会引发一次回调，让你控制这个字的渲染属性，比如位置、缩放、着色；这样会更耗时，所以不需要逐字控制时应使用静态位图文本。</p>
<h3 id="zone">Zone区块</h3>
<p>Zone是一个矩形区块，没有纹理，不显示，但存在于与显示列表中，有游戏对象的一般属性。主要用做点击、角色变动的定位，或重叠检测，或作为非显示对象的基类。</p>
<h3 id="rendertexture">RenderTexture渲染器纹理</h3>
<p>能够在运行时绘制多个游戏对象，实时生成纹理，以供他用。对webGL友好，不激发GPU加载。但不能抗锯齿（如渲染Shape时有锯齿）。</p>
<h3 id="container"><a href="/phaser3-apiwen-dang-da-gang-container.html">Container容器</a></h3>
<p>一个游戏对象加入容器后，即从显示列表中删除，而加入容器内部的显示列表，由容器负责它的渲染；位置也是相对于容器位置而言的。</p>
<p>容器可以嵌套。</p>
<p>容器可以添加遮罩或作为遮罩，但是子项不能添加遮罩，即遮罩不能叠加。</p>
<p>容器可以添加输入，但是因为它没有纹理，所以你必须提供一个shape作为点击区域。容器的子项也能添加输入，并独立于容器。</p>
<p>容器可以赋予物理体。不过，如果子项也有物理属性，并且容器或任何前辈对象不是位于0x0位置的话，那么你可能碰到意外的结果，比如物理体偏置。不把带物理属性的子项考虑进来，是因为需要过多的运算。</p>
<p>要注意容器带来的额外问题。嵌套越深，消耗越会升级，尤其是在输入事件上。尽可能避免使用。</p>
<p>参考<code>Group</code>。</p>
<h3 id="group"><a href="/phaser3-apiwen-dang-da-gang-group.html">Group组</a></h3>
<p>Group是一个抽象分组，便于批量地生成、排布、控制、循环处理近似游戏对象。与Container不同，它自身没有没有显隐、缩放、定位、旋转属性（但可以快速控制子项的这些属性）。他对子项不是独占的，子项可以存在于多个组中。因此<strong>Container更适于把多个显示对象集合成一个复合型显示对象，以便整体地控制显示状态；Group则适合于对近似对象进行批量操作。</strong></p>
<p><strong>组的一个重要用途是对象池。</strong></p>
<h4>生成静态物理组</h4>
<div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">platforms</span><span class="p">;</span>
<span class="n">platforms</span> <span class="o">=</span> <span class="n">this</span><span class="p">.</span><span class="n">physics</span><span class="p">.</span><span class="k">add</span><span class="p">.</span><span class="n">staticGroup</span><span class="p">();</span> <span class="o">//</span> <span class="err">物理静态组</span>
<span class="n">platforms</span><span class="p">.</span><span class="k">create</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">568</span><span class="p">,</span> <span class="s1">'ground'</span><span class="p">).</span><span class="n">setScale</span><span class="p">(</span><span class="mi">2</span><span class="p">).</span><span class="n">refreshBody</span><span class="p">();</span>  <span class="o">//</span> <span class="err">物理静态组变换尺寸后需要刷新物理</span><span class="n">Body</span><span class="err">，即通知物理系统</span>
<span class="n">platforms</span><span class="p">.</span><span class="k">create</span><span class="p">(</span><span class="mi">600</span><span class="p">,</span> <span class="mi">400</span><span class="p">,</span> <span class="s1">'ground'</span><span class="p">);</span>
<span class="n">platforms</span><span class="p">.</span><span class="k">create</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="s1">'ground'</span><span class="p">);</span>
<span class="n">platforms</span><span class="p">.</span><span class="k">create</span><span class="p">(</span><span class="mi">750</span><span class="p">,</span> <span class="mi">220</span><span class="p">,</span> <span class="s1">'ground'</span><span class="p">);</span>
</pre></div>
<h4>生成动态物理组</h4>
<div class="highlight"><pre><span></span><span class="n">stars</span> <span class="o">=</span> <span class="n">this</span><span class="p">.</span><span class="n">physics</span><span class="p">.</span><span class="k">add</span><span class="p">.</span><span class="k">group</span><span class="p">(</span><span class="err">{</span>
    <span class="k">key</span><span class="p">:</span> <span class="s1">'star'</span><span class="p">,</span>
    <span class="n">repeat</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span>
    <span class="n">setXY</span><span class="p">:</span> <span class="err">{</span> <span class="n">x</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">stepX</span><span class="p">:</span> <span class="mi">70</span> <span class="err">}</span> <span class="o">//</span> <span class="err">生成一个行列</span>
<span class="err">}</span><span class="p">);</span>

<span class="n">stars</span><span class="p">.</span><span class="n">children</span><span class="p">.</span><span class="k">iterate</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="n">child</span><span class="p">)</span> <span class="err">{</span>  <span class="o">//</span> <span class="err">组内遍历、随机赋值</span>
    <span class="n">child</span><span class="p">.</span><span class="n">setBounceY</span><span class="p">(</span><span class="n">Phaser</span><span class="p">.</span><span class="n">Math</span><span class="p">.</span><span class="n">FloatBetween</span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">8</span><span class="p">));</span>

<span class="err">}</span><span class="p">);</span>
</pre></div>
<h3 id="lights-webgl-only">Lights (WebGL only)/光照</h3>
<p>Light2D的管道。</p>
<h3 id="meshwebgl-only">Mesh(WebGL only)网格</h3>
<p><strong>Mesh/网格是Phaser3新增功能，只支持webGL渲染模式。Phaser2不支持Mesh，因此也不支持Drangonbone等动画格式中的网格蒙皮功能。</strong></p>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">newMesh</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">mesh</span><span class="p">(</span>
  <span class="mi">300</span><span class="p">,</span>
  <span class="mi">300</span><span class="p">,</span>
  <span class="p">[</span><span class="o">-</span><span class="mi">250</span><span class="p">,</span> <span class="o">-</span><span class="mi">250</span><span class="p">,</span> <span class="o">-</span><span class="mi">250</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="o">-</span><span class="mi">250</span><span class="p">,</span> <span class="o">-</span><span class="mi">250</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="o">-</span><span class="mi">250</span><span class="p">],</span>
  <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
  <span class="p">[</span><span class="mh">0xffffff</span><span class="p">,</span> <span class="mh">0xffffff</span><span class="p">,</span> <span class="mh">0xffffff</span><span class="p">,</span> <span class="mh">0xffffff</span><span class="p">,</span> <span class="mh">0xffffff</span><span class="p">,</span> <span class="mh">0xffffff</span><span class="p">],</span>
  <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
  <span class="s2">"texture"</span>
<span class="p">);</span>
</pre></div>
<p>Parameters</p>
<div class="highlight"><pre><span></span><span class="nv">x</span>                    : <span class="nv">the</span> <span class="nv">x</span> <span class="nv">position</span> <span class="nv">of</span> <span class="nv">the</span> <span class="nv">mesh</span>
<span class="nv">y</span>                    : <span class="nv">the</span> <span class="nv">y</span> <span class="nv">position</span> <span class="nv">of</span> <span class="nv">the</span> <span class="nv">mesh</span>
<span class="nv">vertices</span>             : <span class="nv">array</span> <span class="nv">of</span> <span class="nv">x</span> <span class="nv">and</span> <span class="nv">y</span> <span class="nv">positions</span> <span class="nv">relative</span> <span class="nv">to</span> <span class="nv">center</span> <span class="nv">of</span> <span class="nv">mesh</span> <span class="nv">object</span>
<span class="nv">uv</span>                   : <span class="nv">mapping</span> <span class="nv">of</span> <span class="nv">the</span> <span class="nv">uv</span> <span class="nv">coordinates</span>
<span class="nv">colors</span>               : <span class="nv">array</span> <span class="nv">of</span> <span class="nv">colors</span> <span class="k">for</span> <span class="nv">each</span> <span class="nv">uv</span> <span class="nv">texture</span> <span class="nv">coordinate</span>
<span class="nv">alphas</span>               : <span class="nv">array</span> <span class="nv">of</span> <span class="nv">alphas</span> <span class="k">for</span> <span class="nv">each</span> <span class="nv">uv</span> <span class="nv">texture</span> <span class="nv">coordinate</span>
<span class="nv">texture</span>              : <span class="nv">sprite</span> <span class="nv">name</span>
<span class="nv">frame</span>                : <span class="nv">the</span> <span class="nv">sprite</span> <span class="nv">frame</span>
</pre></div>
<p>通过<code>newMesh.vertices[0]</code>、<code>newMesh.uv[0]</code>等引用、操作。</p>
<p>参考小抄 <a href="https://github.com/digitsensitive/phaser3-typescript/blob/master/cheatsheets/gameobjects/mesh.md">Phaser.GameObject.Mesh</a></p>
<h3 id="quad-webgl-only">Quad (WebGL only)/方块</h3>
<p>Mesh网格的一个单元。</p>
<h3 id="shader-webgl-only">Shader (WebGL only)/着色器</h3>
<p>控制quad方块的显示。【？？？】 </p>
<h3 id="domelementdom">DOMElement/DOM元素</h3>
<p>DOMElement是在游戏上操控HTML元素的方法。需要在游戏配置对象中开启：</p>
<div class="highlight"><pre><span></span><span class="nx">dom</span> <span class="p">{</span>
  <span class="nx">createContainer</span><span class="o">:</span> <span class="kc">true</span>
<span class="p">}</span>
</pre></div>
<p>这样会自动在游戏画布上方生成一个尺寸相同的DOM容器div。所有DOM元素都会插入同一个DOM容器，而不管是在那个场景中生成的。可以这样添加DOM元素到容器中：</p>
<div class="highlight"><pre><span></span><span class="k">this</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">dom</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="s1">'div'</span><span class="p">,</span> <span class="s1">'background-color: lime; width: 220px; height: 100px; font: 48px Arial'</span><span class="p">,</span> <span class="s1">'Phaser'</span><span class="p">);</span>
</pre></div>
<p>你可以像操控其他游戏对象一样操控DOM对象，比如设置位置、缩放、旋转、透明度等属性。但它不能开启输入；但可以直接用addListener方法添加原生事件监听器。 </p>
<p>DOM元素是对齐原生HTML和游戏对象的好办法。比如，你可以你可以插入登录框，或文本输入框，或者从第三方服务插入条幅广告，或者用于高解析度的文本显示与UI。</p>
<h2 id="input">Input游戏对象的输入控制</h2>
<ul>
<li>GameObject.setInteractive( [shape] [, callback] [, dropZone])</li>
</ul>
<p>开启交互，生成交互游戏对象，即把此对象传给输入管理器，以开启输入。
点击区域（hitArea）默认是基于游戏对象纹理生成的正方形；
没有绑定纹理的游戏对象（如Graphics、BitmapText）则需要传递一个shape（配置对象或geometric shape），这时候还需要传递回调函数。
回调函数要能接收三个变量，并返回表示击中与否的布尔值：<code>callback(hitArea, x, y): boolean</code>。比较常用的一类是几何图形的静态函数<code>Contains</code>，如<code>Phaser.Geom.Rectangle.Contains</code>(<code>&lt;static&gt; Contains(rect, x, y)</code>)。</p>
<div class="highlight"><pre><span></span><span class="nx">text</span><span class="p">.</span><span class="nx">setInteractive</span><span class="p">(</span><span class="k">new</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">Geom</span><span class="p">.</span><span class="nx">Rectangle</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">text</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="nx">text</span><span class="p">.</span><span class="nx">height</span><span class="p">),</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">Geom</span><span class="p">.</span><span class="nx">Rectangle</span><span class="p">.</span><span class="nx">Contains</span><span class="p">);</span>
<span class="c1">//  Input Event listeners</span>
<span class="c1">// this: Phaser.Scene</span>
<span class="k">this</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'gameobjectover'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">pointer</span><span class="p">,</span> <span class="nx">gameObject</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">gameObject</span><span class="p">.</span><span class="nx">setTint</span><span class="p">(</span><span class="mh">0xff0000</span><span class="p">,</span> <span class="mh">0xff0000</span><span class="p">,</span> <span class="mh">0xffff00</span><span class="p">,</span> <span class="mh">0xff00ff</span><span class="p">);</span>
<span class="p">});</span>
<span class="k">this</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'gameobjectout'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">pointer</span><span class="p">,</span> <span class="nx">gameObject</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">gameObject</span><span class="p">.</span><span class="nx">clearTint</span><span class="p">();</span>
<span class="p">});</span>
</pre></div>
<ul>
<li>GameObject.removeInteractive()</li>
</ul>
<p>移除交互游戏对象。不是即时的，是在the next game step。</p>
<ul>
<li>GameObject.disableInteractive()</li>
</ul>
<p>临时禁用。</p>
<ul>
<li>GameObject.input.hitArea.setSize(width, height)</li>
</ul>
<p>设置击中区域（默认方形）。</p>
<ul>
<li>GameObject.input</li>
</ul>
<p>此属性用以保存交互对象。</p>
<p><a href="https://phaser.io/phaser3/devlog/89">Input问题，可参考开发日志。</a></p>
<h2 id="_5">生成碰撞、重叠管理对象</h2>
<div class="highlight"><pre><span></span><span class="k">this</span><span class="p">.</span><span class="nx">physics</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">collider</span><span class="p">(</span><span class="nx">player</span><span class="p">,</span> <span class="nx">platforms</span><span class="p">);</span>
<span class="k">this</span><span class="p">.</span><span class="nx">physics</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">collider</span><span class="p">(</span><span class="nx">stars</span><span class="p">,</span> <span class="nx">platforms</span><span class="p">);</span> <span class="c1">// 组与组碰撞</span>

<span class="k">this</span><span class="p">.</span><span class="nx">physics</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">overlap</span><span class="p">(</span><span class="nx">player</span><span class="p">,</span> <span class="nx">stars</span><span class="p">,</span> <span class="nx">collectStar</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
<span class="kd">function</span> <span class="nx">collectStar</span> <span class="p">(</span><span class="nx">player</span><span class="p">,</span> <span class="nx">star</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nx">star</span><span class="p">.</span><span class="nx">disableBody</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span> 
<span class="p">}</span>
</pre></div>
<h2 id="input_1">Input生成输入管理对象</h2>
<div class="highlight"><pre><span></span><span class="nx">cursors</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">keyboard</span><span class="p">.</span><span class="nx">createCursorKeys</span><span class="p">();</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">cursors</span><span class="p">.</span><span class="nx">left</span><span class="p">.</span><span class="nx">isDown</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nx">player</span><span class="p">.</span><span class="nx">setVelocityX</span><span class="p">(</span><span class="o">-</span><span class="mi">160</span><span class="p">);</span>
    <span class="nx">player</span><span class="p">.</span><span class="nx">anims</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="s1">'left'</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">cursors</span><span class="p">.</span><span class="nx">right</span><span class="p">.</span><span class="nx">isDown</span><span class="p">){}</span>
<span class="k">else</span><span class="p">{}</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">cursors</span><span class="p">.</span><span class="nx">up</span><span class="p">.</span><span class="nx">isDown</span> <span class="o">&amp;&amp;</span> <span class="nx">player</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">touching</span><span class="p">.</span><span class="nx">down</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nx">player</span><span class="p">.</span><span class="nx">setVelocityY</span><span class="p">(</span><span class="o">-</span><span class="mi">330</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
<h2 id="gameresize">调整尺寸Game.resize</h2>
<p>根据浏览器窗口变动调整尺寸。</p>
<div class="highlight"><pre><span></span><span class="nb">window</span><span class="p">.</span><span class="nx">onresize</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="nx">game</span><span class="p">.</span><span class="nx">resize</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span><span class="p">,</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>
<h2 id="game">销毁Game实例</h2>
<div class="highlight"><pre><span></span><span class="nx">Game</span><span class="p">.</span><span class="nx">destroy</span><span class="p">(</span><span class="nx">removeCanvas</span> <span class="p">[,</span> <span class="nx">noReturn</span><span class="p">])</span>
</pre></div>
<h2 id="src">src文件结构（最佳实践）</h2>
<div class="highlight"><pre><span></span><span class="nx">src</span>
<span class="o">|</span>   <span class="nx">phaser</span><span class="p">.</span><span class="nx">d</span><span class="p">.</span><span class="nx">ts</span>  <span class="c1">// Phaser类型声明文件，Typescript编译器需要</span>
<span class="o">|</span>   <span class="nx">main</span><span class="p">.</span><span class="nx">ts</span>      <span class="c1">// web版入口文件</span>
<span class="o">|</span>   <span class="nx">game</span><span class="p">.</span><span class="nx">ts</span>      <span class="c1">// 微信版入口文件</span>
<span class="o">|</span>   
<span class="o">+---</span><span class="kr">const</span>        <span class="c1">// 存放配置常量</span>
<span class="o">|</span>       
<span class="o">+---</span><span class="nx">js</span>           <span class="c1">// 存放js库，比如微信适配用的</span>
<span class="o">|</span>           
<span class="o">+---</span><span class="nx">objects</span>      <span class="c1">// 存放游戏对象类</span>
<span class="o">|</span>       
<span class="err">\</span><span class="o">---</span><span class="nx">scenes</span>       <span class="c1">// 存放场景类</span>
        <span class="nx">BootScene</span><span class="p">.</span><span class="nx">ts</span>       <span class="c1">// 启动，为生成载入场景预备必要资源（尽可能少）</span>
        <span class="nx">PreloadScene</span><span class="p">.</span><span class="nx">ts</span>    <span class="c1">// 载入各场景通用资源，显示载入动画</span>
        <span class="nx">MainMenuScene</span><span class="p">.</span><span class="nx">ts</span>   <span class="c1">// 游戏菜单</span>
        <span class="nx">GameScene</span><span class="p">.</span><span class="nx">ts</span>       <span class="c1">// 游戏场景</span>
</pre></div>
<p>另外，如果不使用webpack等打包工具，<code>index.html</code>文件和资源文件夹<code>assets/</code>可以跟入口文件<code>main.ts</code>放在同一层级（即<code>src/</code>)。</p>
<p>微信版需要单建一个项目文件夹，存放微信小游戏必须的文件<code>game.js</code>（<code>game.ts</code>的编译目标）、<code>game.json</code>、<code>project.config.json</code>，以及<code>assets/</code>、<code>js/</code>等资源。微信版的问题当专文说明。</p>
<h2 id="math">Math数学</h2>
<h3 id="rnd">RND随机数</h3>
<ul>
<li>随机取选取列表中的项目</li>
</ul>
<div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">nouns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"ninja"</span><span class="p">,</span> <span class="s2">"chair"</span><span class="p">,</span> <span class="s2">"pancake"</span><span class="p">]</span>
<span class="kd">var</span> <span class="nx">str</span> <span class="o">=</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nb">Math</span><span class="p">.</span><span class="nx">RND</span><span class="p">.</span><span class="nx">pick</span><span class="p">(</span><span class="nx">nouns</span><span class="p">);</span>
</pre></div>
<h2 id="_6">对象对齐（定位）</h2>
<p>常用四个类中的静态方法：</p>
<ul>
<li><a href="/phaser3-apiwen-dang-da-gang-displayaligninto.html">Display.Align中的In和To</a></li>
<li><a href="/phaser3-apiwen-dang-da-gang-displaybounds.html">Display.Bounds</a></li>
<li><a href="/phaser3-apiwen-dang-da-gang-actions.html">Actions.GridAlign中的静态方法GridAlign、PlaceOn系列、Inc系列，Set系列，等等)</a></li>
</ul>
<h2 id="actions"><a href="/phaser3-apiwen-dang-da-gang-actions.html">Actions动作（批处理）</a></h2>
<p><code>Phaser. Actions</code>包含一组静态方法，可以对一组游戏对象进行批量处理，应用相同的动作。常常结合逻辑分组<code>Group.getChildren()</code>一起使用。
条目要包含要处理的属性、方法，否则无效。</p>
<p>@actions\place on circle.js</p>
<div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">circle</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">Geom</span><span class="p">.</span><span class="nx">Circle</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">260</span><span class="p">);</span>
<span class="nx">group</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">group</span><span class="p">({</span> <span class="nx">key</span><span class="o">:</span> <span class="s1">'ball'</span><span class="p">,</span> <span class="nx">frameQuantity</span><span class="o">:</span> <span class="mi">32</span> <span class="p">});</span>
<span class="c1">// 把组中游戏对象放置在圆环上</span>
<span class="nx">Phaser</span><span class="p">.</span><span class="nx">Actions</span><span class="p">.</span><span class="nx">PlaceOnCircle</span><span class="p">(</span><span class="nx">group</span><span class="p">.</span><span class="nx">getChildren</span><span class="p">(),</span> <span class="nx">circle</span><span class="p">);</span>
</pre></div></div>
	
            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                TOC
                </li>
                <nav class="toc">
                    <div class="toc">
<ul>
<li><a href="#_1">说明</a></li>
<li><a href="#_2">入门三部曲</a></li>
<li><a href="#_3">学习资源</a></li>
<li><a href="#_4">资源检索</a></li>
<li><a href="#gamegameconfig">Game配置对象GameConfig</a></li>
<li><a href="#gameobjects">GameObjects游戏对象</a><ul>
<li><a href="#sprite">Sprite精灵</a></li>
<li><a href="#image">Image/图像</a></li>
<li><a href="#shape">Shape/几何图形及其子类</a></li>
<li><a href="#graphics">Graphics/几何图画</a></li>
<li><a href="#tilesprite">TileSprite瓦片精灵</a></li>
<li><a href="#sprite3d3d">Sprite3D/3D精灵</a></li>
<li><a href="#pathfollower">PathFollower/循路器</a></li>
<li><a href="#blitter">Blitter/显存块移动单元/位块传送器</a></li>
<li><a href="#bob">Bob/显存块移动对象/位块传送对象</a></li>
<li><a href="#text">Text文本</a></li>
<li><a href="#bitmaptext">BitmapText静态位图文本</a></li>
<li><a href="#dynamicbitmaptext">DynamicBitmapText动态位图文本</a></li>
<li><a href="#zone">Zone区块</a></li>
<li><a href="#rendertexture">RenderTexture渲染器纹理</a></li>
<li><a href="#container">Container容器</a></li>
<li><a href="#group">Group组</a></li>
<li><a href="#lights-webgl-only">Lights (WebGL only)/光照</a></li>
<li><a href="#meshwebgl-only">Mesh(WebGL only)网格</a></li>
<li><a href="#quad-webgl-only">Quad (WebGL only)/方块</a></li>
<li><a href="#shader-webgl-only">Shader (WebGL only)/着色器</a></li>
<li><a href="#domelementdom">DOMElement/DOM元素</a></li>
</ul>
</li>
<li><a href="#input">Input游戏对象的输入控制</a></li>
<li><a href="#_5">生成碰撞、重叠管理对象</a></li>
<li><a href="#input_1">Input生成输入管理对象</a></li>
<li><a href="#gameresize">调整尺寸Game.resize</a></li>
<li><a href="#game">销毁Game实例</a></li>
<li><a href="#src">src文件结构（最佳实践）</a></li>
<li><a href="#math">Math数学</a><ul>
<li><a href="#rnd">RND随机数</a></li>
</ul>
</li>
<li><a href="#_6">对象对齐（定位）</a></li>
<li><a href="#actions">Actions动作（批处理）</a></li>
</ul>
</div>
                </nav>                
            </ul>
            </div>
        
        <hr>

    </div>
        </div>
        
        <div class="span3">

            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Site
                </li>
            
                <li><a href="/archives.html">Archives</a>
                <li><a href="/tags.html">Tags</a>




            </ul>
            </div>


            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Categories
                </li>
                
                <li><a href="/category/bu-kao-si-ji.html">布考斯基</a></li>
                <li><a href="/category/qi-ji-yin-qiao-zhi.html">奇技淫巧志</a></li>
                <li><a href="/category/xi-phaser.html">习Phaser</a></li>
                <li><a href="/category/xi-pyo.html">习Pyo</a></li>
                <li><a href="/category/xiang-ba-ai-xue-xi.html">想爸爱学习</a></li>
                   
            </ul>
            </div>


            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Links
                </li>

                <li>拼字游戏(微信版):</li>
                <div align="center"><img src="http://blog.xiiigame.com/images/about/qrCode.jpg" /></div> 

                <li><a href="http://www.xiiigame.com/example">拼字游戏(网页版)</a></li>
            </ul>
            </div>


            <div class="social">
            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Social
                </li>
           
                <li><a href="https://github.com/Fusyong">GitHub</a></li>
                <li><a href="https://www.phaser-china.com/">Phaser小站</a></li>
            </ul>
            </div>
            </div>

        </div>  
    </div>     </div> 
<footer>
<br />
<p><a href="">嬉戏实验室</a> &copy; 黄复雄 2019, Powered by <a href="http://getpelican.com/">Pelican</a></p>
</footer>

</div> <!-- /container -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="/theme/bootstrap-collapse.js"></script>
<script>var _gaq=[['_setAccount','UA-105243279-1'],['_trackPageview']];(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.src='//www.google-analytics.com/ga.js';s.parentNode.insertBefore(g,s)}(document,'script'))</script>
<a href="https://github.com/Fusyong"><img style="position: absolute; top: 40px; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png" alt="Fork me on GitHub" /></a>
 
</body>
</html>